<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>아이디중복조회</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap Core CSS -->
  <link href="/bootstrap-4.1.3-dist/css/bootstrap.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link href="/stylesheets/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  <script type="text/javascript">
    function checkID() {
      $("#idchek").submit();
    }

    function inputIDchk() {
      //처음 중복검사 창이 떴을 때
      <% if(pass == undefined) { %>
          document.getElementById("idinput").value = opener.document.getElementById("user_id").value;
          document.getElementById("useBtn").style.visibility = "hidden";
      <% } else if(pass == true) { %>   //중복된 아이디가 없는 경우
          document.getElementById("msg").innerHTML = "사용가능한 아이디입니다.";
          document.getElementById("idinput").value = "<%=user_id%>";
          document.getElementById("useBtn").style.visibility = "visible";
        <% } else if(pass == false) { %>  //중복된 아이디가 있는 경우
          alert("===사용할 수 없는 아이디입니다.===");
          document.getElementById("idinput").value = "<%=user_id%>";
          document.getElementById("useBtn").style.visibility = "hidden";
        <% } %>
    }

    function sendID() {
      opener.document.getElementById("user_id").value = document.getElementById("idinput").value;
      window.close();
    }
</script>

</head>

<body onload="inputIDchk()">
  <h1> 아이디 중복 조회 </h1>
  <form id="idCheck" action='/auth/join/idcheck' method='post'>
    <input type="text" name="user_id" id="idinput">
    <input type="submit" name="idchek" id="idcheck" value="확인" onclick="checkID();">
    <div id="msg"></div>
    <input id="useBtn" type="button" value="사용하기" onclick="sendID();">
  </form>
</body>

</html>
